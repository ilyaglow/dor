version: "2"
services:
  web:
    restart: always
    build:
      context: .
      dockerfile: docker/Dockerfile.web-mongo
    depends_on:
      - mongo
    ports:
      - "8080:8080"
    environment:
      DOR_MONGO_URL: "mongo"
      DOR_PORT: "8080"

  insert:
    restart: always
    depends_on:
      - mongo
    build:
      context: .
      dockerfile: docker/Dockerfile.insert-mongo
    environment:
      DOR_MONGO_URL: "mongo"

  mongo:
    restart: always
    image: mongo:latest
    volumes:
      - ./mongodata:/data/db
